(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{194:function(t,e,r){"use strict";r.r(e);var s=r(0),a=Object(s.a)({},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"content"},[t._m(0),t._v(" "),r("p",[t._v("随着java系统架构由单体应用向分布式发展，本地单服务器向云端多服务器发展。java环境产生的代码需要向越来越多的服务器进行部署。")]),t._v(" "),r("p",[t._v("敏捷开发的流行，让客户或领导急于看到最新的开发进展，需要我们频繁的更新多台服务器的代码。\n繁琐且重复的部署命令，不同服务器之间的环境差距，往往容易产生无法预知的问题。")]),t._v(" "),r("p",[t._v("在公司又不愿意花钱招运维的情况下，苦逼的java后端程序员急需要使用一种提高部署效率的解决方案。")]),t._v(" "),r("p",[t._v("Docker+DockerCompose+Docker-register+GitLab的方式就进入了我们的视野。")]),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),r("p",[t._v("Docker是一个开源的应用容器引擎。开发者可以将自己的应用打包在可移植的容器中，然后发布到任何Linux上都可以运行。真正的实现了一次构建到处运行。")]),t._v(" "),r("p",[t._v("Docker是一种虚拟化技术，由于直接运行在宿主机内核上，且不会虚拟任何硬件。因此资源耗费低，开启速度快，可以达到秒级启动。由于资源耗费低，在一台宿主机上甚至可以启动上千容器。此外，各个容器直接是相互隔离的，安全且高可用，一个容器出问题不会导致整个宿主机出问题。")]),t._v(" "),t._m(3),t._v(" "),r("p",[t._v("Docker是C/S架构，通过Api管理容器。")]),t._v(" "),r("p",[t._v("Docker的容器通过镜像来创建，镜像类似于一套模板。容器可以根据一个镜像创建多个容器，每一个容器之间互相隔离。镜像中的数据会影响容器创建时的数据，容器产生的数据变化不会影响镜像。")]),t._v(" "),t._m(4),t._v(" "),r("p",[t._v("Docker使用分层文件架构。一个镜像不是一个文件，而是一组文件的集合。在多个镜像之间有相互公用的底层文件时，能大大降低存储空间。因此在创建镜像的时候，每一层尽量只添加需要添加的东西，提供文件的复用率。")]),t._v(" "),t._m(5),t._v(" "),r("p",[t._v("Docker镜像存在镜像仓库中，Docker官方为我们提供了官方镜像库"),r("a",{attrs:{href:"https://hub.docker.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker Hub"),r("OutboundLink")],1),t._v("，我们也可以搭建自己的私有仓库。")]),t._v(" "),t._m(6),t._v(" "),r("p",[t._v("Docker分为CE社区版与EE企业版。普通人家只要装Docker CE就足够满足日常需求。")]),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),r("p",[t._v("官方教程可参考"),r("a",{attrs:{href:"https://docs.docker.com/install/linux/docker-ce/centos/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://docs.docker.com/install/linux/docker-ce/centos/"),r("OutboundLink")],1)]),t._v(" "),r("p",[t._v("中文版本可参考"),r("a",{attrs:{href:"http://www.runoob.com/docker/centos-docker-install.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://www.runoob.com/docker/centos-docker-install.html"),r("OutboundLink")],1)]),t._v(" "),t._m(9),t._v(" "),t._m(10),t._m(11),t._v(" "),t._m(12),t._v(" "),t._m(13),t._m(14),t._v(" "),t._m(15),t._m(16),t._v(" "),t._m(17),t._m(18),t._v(" "),t._m(19),t._m(20),t._v(" "),t._m(21),t._m(22),t._v(" "),t._m(23),t._m(24),t._v(" "),t._m(25),t._m(26),t._v(" "),t._m(27),t._v(" "),t._m(28),t._m(29),t._v(" "),t._m(30),t._m(31),t._v(" "),t._m(32),t._m(33),t._v(" "),t._m(34),t._m(35),t._v(" "),t._m(36),t._v(" "),t._m(37),t._m(38),t._v(" "),t._m(39),t._m(40),t._v(" "),t._m(41),t._m(42),t._v(" "),t._m(43),t._m(44),t._v(" "),t._m(45),t._m(46),t._v(" "),t._m(47),t._m(48),t._v(" "),t._m(49),t._v(" "),t._m(50),t._v(" "),t._m(51),t._v(" "),t._m(52),t._m(53),t._v(" "),t._m(54),t._v(" "),t._m(55),t._m(56),t._v(" "),t._m(57),t._m(58),t._v(" "),r("p",[t._v("Docker的容器启动需要依赖镜像。在运行容器的时候如果本地没有镜像则自动会去docker镜像仓库中下载。")]),t._v(" "),t._m(59),t._v(" "),t._m(60),t._v(" "),t._m(61),r("p",[t._v("OPTIONS是选项。")]),t._v(" "),t._m(62),t._m(63),t._v(" "),t._m(64),t._v(" "),t._m(65),t._v(" "),t._m(66),r("p",[t._v("列表包含了仓库名（REPOSITORY）、标签（TAG）、镜像唯一id（IMAGE ID）、最近创建日期（CREATED）、大小（SIZE）")]),t._v(" "),t._m(67),t._v(" "),t._m(68),t._v(" "),t._m(69),t._v(" "),t._m(70),r("p",[t._v("其中，镜像既可以是镜像名，短id，长id或是摘要")]),t._v(" "),t._m(71),t._v(" "),t._m(72),t._m(73),t._v(" "),r("p",[t._v("（待更新）")]),t._v(" "),t._m(74),t._v(" "),t._m(75),t._v(" "),t._m(76),t._v(" "),t._m(77),t._m(78),t._v(" "),r("p",[t._v("常用参数：")]),t._v(" "),t._m(79),t._m(80),t._v(" "),t._m(81),t._m(82),t._v(" "),t._m(83),t._v(" "),t._m(84),t._v(" "),t._m(85),t._v(" "),t._m(86),r("p",[t._v("参数：")]),t._v(" "),t._m(87),t._m(88),t._v(" "),t._m(89),t._v(" "),t._m(90),t._v(" "),t._m(91),t._v(" "),r("p",[t._v("常见用法")]),t._v(" "),t._m(92),t._v(" "),t._m(93),t._v(" "),r("p",[t._v("Docker仓库是存放docker镜像的中心，支持官方仓库与自建私有仓库。")]),t._v(" "),r("h3",{attrs:{id:"docker-hub"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#docker-hub","aria-hidden":"true"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://hub.docker.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker Hub"),r("OutboundLink")],1)]),t._v(" "),t._m(94),t._v(" "),r("h4",{attrs:{id:"docker-registry"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#docker-registry","aria-hidden":"true"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://docs.docker.com/registry/",target:"_blank",rel:"noopener noreferrer"}},[t._v("docker-registry"),r("OutboundLink")],1)]),t._v(" "),r("p",[t._v("官方提供用于构建私有仓库的工具。")]),t._v(" "),r("p",[t._v("官方文档：https://docs.docker.com/registry/")]),t._v(" "),t._m(95),t._v(" "),r("p",[t._v("获取官方registry镜像并运行")]),t._v(" "),t._m(96),t._m(97),t._v(" "),t._m(98),t._v(" "),t._m(99),t._m(100),t._v(" "),t._m(101),t._v(" "),t._m(102),t._v(" "),t._m(103),t._v(" "),t._m(104),t._v(" "),t._m(105),t._v(" "),t._m(106),t._v(" "),t._m(107),t._v(" "),t._m(108),t._v(" "),t._m(109),t._v(" "),t._m(110),t._v(" "),r("p",[t._v("Docker很方便的为我们进行了应用的部署，但是当大量的容器需要进行管理时，重复的Docker指令也令我们头疼。")])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"导语：为什么需要自动化部署"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#导语：为什么需要自动化部署","aria-hidden":"true"}},[this._v("#")]),this._v(" 导语：为什么需要自动化部署")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"docker"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker","aria-hidden":"true"}},[this._v("#")]),this._v(" Docker")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"docker是什么"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker是什么","aria-hidden":"true"}},[this._v("#")]),this._v(" Docker是什么")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"docker架构"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker架构","aria-hidden":"true"}},[this._v("#")]),this._v(" Docker架构")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"docker文件系统"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker文件系统","aria-hidden":"true"}},[this._v("#")]),this._v(" Docker文件系统")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"docker镜像仓库"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker镜像仓库","aria-hidden":"true"}},[this._v("#")]),this._v(" Docker镜像仓库")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"安装dokcer"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装dokcer","aria-hidden":"true"}},[this._v("#")]),this._v(" 安装Dokcer")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"centos安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#centos安装","aria-hidden":"true"}},[this._v("#")]),this._v(" CentOS安装")])},function(){var t=this.$createElement,e=this._self._c||t;return e("blockquote",[e("p",[this._v("⚠️：Docer在CentOS上运行需要系统为64位，且内核版本在3.10以上。")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{attrs:{id:"查看系统的内核版本"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看系统的内核版本","aria-hidden":"true"}},[this._v("#")]),this._v(" 查看系统的内核版本")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("[root@ludan /]# uname -r\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("img",{attrs:{src:"http://qiniu.xuchen.link/8fad2a093a88bcdb8fb39b2ac2b89517.png",width:"200",height:"80",alt:"3.10以上内核版本"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{attrs:{id:"删除旧版本"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#删除旧版本","aria-hidden":"true"}},[this._v("#")]),this._v(" 删除旧版本")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("$ sudo yum remove docker \\\n                  docker-client \\\n                  docker-client-latest \\\n                  docker-common \\\n                  docker-latest \\\n                  docker-latest-logrotate \\\n                  docker-logrotate \\\n                  docker-selinux \\\n                  docker-engine-selinux \\\n                  docker-engine\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{attrs:{id:"安装必要系统工具"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装必要系统工具","aria-hidden":"true"}},[this._v("#")]),this._v(" 安装必要系统工具")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("sudo yum install -y yum-utils device-mapper-persistent-data lvm2\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{attrs:{id:"添加软件源信息"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#添加软件源信息","aria-hidden":"true"}},[this._v("#")]),this._v(" 添加软件源信息")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("sudo yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{attrs:{id:"更新-yum-缓存"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#更新-yum-缓存","aria-hidden":"true"}},[this._v("#")]),this._v(" 更新 yum 缓存")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("sudo yum makecache fast\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{attrs:{id:"安装-docker-ce"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装-docker-ce","aria-hidden":"true"}},[this._v("#")]),this._v(" 安装 Docker-ce")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("sudo yum -y install docker-ce\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{attrs:{id:"启动docker后台进程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动docker后台进程","aria-hidden":"true"}},[this._v("#")]),this._v(" 启动docker后台进程")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("sudo systemctl start docker\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{attrs:{id:"测试docker，运行hello-word"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#测试docker，运行hello-word","aria-hidden":"true"}},[this._v("#")]),this._v(" 测试docker，运行hello-word")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("docker run hello-world\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"脚本安装docker"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#脚本安装docker","aria-hidden":"true"}},[this._v("#")]),this._v(" 脚本安装docker")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{attrs:{id:"确保-yum-包更新到最新"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#确保-yum-包更新到最新","aria-hidden":"true"}},[this._v("#")]),this._v(" 确保 yum 包更新到最新")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("sudo yum update\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{attrs:{id:"执行-docker-安装脚本"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#执行-docker-安装脚本","aria-hidden":"true"}},[this._v("#")]),this._v(" 执行 Docker 安装脚本")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("curl -fsSL https://get.docker.com -o get-docker.sh\nsudo sh get-docker.sh\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{attrs:{id:"启动容器进程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动容器进程","aria-hidden":"true"}},[this._v("#")]),this._v(" 启动容器进程")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("sudo systemctl start docker\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{attrs:{id:"验证镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#验证镜像","aria-hidden":"true"}},[this._v("#")]),this._v(" 验证镜像")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("sudo docker run hello-world\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"ubuntu安装docker"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu安装docker","aria-hidden":"true"}},[this._v("#")]),this._v(" Ubuntu安装Docker")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{attrs:{id:"卸载旧版本"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#卸载旧版本","aria-hidden":"true"}},[this._v("#")]),this._v(" 卸载旧版本")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("sudo apt-get remove docker docker-engine docker.io containerd runc\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{attrs:{id:"apt安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#apt安装","aria-hidden":"true"}},[this._v("#")]),this._v(" apt安装")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("sudo apt-get update\nsudo apt-get -y install apt-transport-https ca-certificates curl software-properties-common\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{attrs:{id:"安装-gpg-证书"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装-gpg-证书","aria-hidden":"true"}},[this._v("#")]),this._v(" 安装 GPG 证书")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("curl -fsSL http://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo apt-key add -\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{attrs:{id:"写入软件信息"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#写入软件信息","aria-hidden":"true"}},[this._v("#")]),this._v(" 写入软件信息")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v('sudo add-apt-repository "deb [arch=amd64] http://mirrors.aliyun.com/docker-ce/linux/ubuntu $(lsb_release -cs) stable"\n')])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{attrs:{id:"更新并安装-docker-ce"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#更新并安装-docker-ce","aria-hidden":"true"}},[this._v("#")]),this._v(" 更新并安装 Docker CE")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("sudo apt-get -y update\nsudo apt-get -y install docker-ce\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{attrs:{id:"测试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#测试","aria-hidden":"true"}},[this._v("#")]),this._v(" 测试")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("docker run hello-world\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"镜像加速"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#镜像加速","aria-hidden":"true"}},[this._v("#")]),this._v(" 镜像加速")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{attrs:{id:"ubuntu-16-04-、debian-8-、centos-7"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu-16-04-、debian-8-、centos-7","aria-hidden":"true"}},[this._v("#")]),this._v(" Ubuntu 16.04+、Debian 8+、CentOS 7")])},function(){var t=this.$createElement,e=this._self._c||t;return e("blockquote",[e("p",[this._v("⚠️ 针对systemd系统使用如下方法")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("在"),e("code",[this._v("/etc/docker/daemon.json")]),this._v("设置仓库地址")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v('{\n  "registry-mirrors": [\n    "https://registry.docker-cn.com"\n  ]\n}\n')])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{attrs:{id:"检查加速器是否生效"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#检查加速器是否生效","aria-hidden":"true"}},[this._v("#")]),this._v(" 检查加速器是否生效")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("在命令行执行"),e("code",[this._v("docker info")]),this._v("\n如果在命令回显的消息中出现如下信息,则表示成功")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("Registry Mirrors:\n https://registry.docker-cn.com/\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"删除docker-ce"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#删除docker-ce","aria-hidden":"true"}},[this._v("#")]),this._v(" 删除docker-ce")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("sudo yum remove docker-ce\nsudo rm -rf /var/lib/docker\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"docker镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker镜像","aria-hidden":"true"}},[this._v("#")]),this._v(" Docker镜像")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"拉取镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#拉取镜像","aria-hidden":"true"}},[this._v("#")]),this._v(" 拉取镜像")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("可以通过"),e("code",[this._v("docker pull")]),this._v("命令主动获取镜像。命令格式为")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("docker pull [OPTIONS] NAME[:TAG|@DIGEST]\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v(" -a, --all-tags               下载所有标记的镜像\n\n  --disable-content-trust   跳过验证（默认为true）\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("NAME是镜像名，一般由"),e("code",[this._v("域名/IP[:端口]仓库名")]),this._v("构成，官方镜像默认只有仓库名\nTAG是标签，一般为版本号。")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"展示镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#展示镜像","aria-hidden":"true"}},[this._v("#")]),this._v(" 展示镜像")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("可以使用"),e("code",[this._v("docker image ls")]),this._v("命令展示所有镜像。展示的列表：")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("$ docker images fedora\n\nREPOSITORY   TAG         IMAGE ID        CREATED      SIZE\nfedora       rawhide     ad57ef8d78d7    5 days ago   359.3 MB\nfedora       20          105182bb5e8b    5 days ago   372.7 MB\nfedora       heisenbug   105182bb5e8b    5 days ago   372.7 MB\nfedora       latest      105182bb5e8b    5 days ago   372.7 MB\n<none>       <none>      105182bb5e8a    6 days ago   372.7 MB\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"虚悬镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#虚悬镜像","aria-hidden":"true"}},[this._v("#")]),this._v(" 虚悬镜像")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("上列表中仓库名与标签都为none的为虚悬镜像。仓库名与标签对应一个唯一的镜像，但是这个镜像可以更换。当同一个镜像名+标签所指向的镜像更换后，旧的镜像就失去指引，变成虚悬镜像，类似于java中的对象失去了引用。可以通过"),e("code",[this._v("docker image prune")]),this._v("命令删除.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"删除镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#删除镜像","aria-hidden":"true"}},[this._v("#")]),this._v(" 删除镜像")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("docker image rm [选项] <镜像1> [<镜像2> ...]\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{attrs:{id:"强制删除镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#强制删除镜像","aria-hidden":"true"}},[this._v("#")]),this._v(" 强制删除镜像")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("docker rmi [选项] <镜像1> [<镜像2> ...]\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"使用dockerfile定制镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用dockerfile定制镜像","aria-hidden":"true"}},[this._v("#")]),this._v(" 使用Dockerfile定制镜像")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"docker容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker容器","aria-hidden":"true"}},[this._v("#")]),this._v(" Docker容器")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"启动容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动容器","aria-hidden":"true"}},[this._v("#")]),this._v(" 启动容器")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"新建容器并启动"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#新建容器并启动","aria-hidden":"true"}},[this._v("#")]),this._v(" 新建容器并启动")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v(" docker run [OPTIONS] IMAGE [COMMAND] [ARG...]\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("(OPTIONS太多，不赘述)主要使用的最多的就是直接"),e("code",[this._v("docker run 镜像名")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("-i Keep STDIN open even if not attached（在没有连接的情况下持续打开标准输入）\n-t Allocate a pseudo-TTY（分配一个伪终端）\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"启动已中止容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动已中止容器","aria-hidden":"true"}},[this._v("#")]),this._v(" 启动已中止容器")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("docker container start [OPTIONS] 容器名1 [容器2...]\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"守护态运行"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#守护态运行","aria-hidden":"true"}},[this._v("#")]),this._v(" 守护态运行")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("在启动的时候，加上参数 "),e("code",[this._v("-d")]),this._v("即可作为守护态运行。运行后，容器产生的相关输出结果不会显示在控制台上，而是显示一个容器id。")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("可以通过"),e("code",[this._v("docker container logs 容器名或id")]),this._v("查看容器相关日志")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"终止容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#终止容器","aria-hidden":"true"}},[this._v("#")]),this._v(" 终止容器")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("docker container stop [OPTIONS] CONTAINER [CONTAINER...]\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("-t 关闭前等待时间，默认10s\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"进入容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#进入容器","aria-hidden":"true"}},[this._v("#")]),this._v(" 进入容器")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("进入容器有两个命令："),e("code",[this._v("attach")]),this._v("和"),e("code",[this._v("exec")]),this._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("code",[this._v("attach")]),this._v("不推荐使用，因为在退出容器的时候会停止容器。")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("code",[this._v("exec")]),this._v("常搭配-it使用，以交互的方式进入容器。")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("code",[this._v("docker exec -it 容器名 /bin/bash")]),this._v(",使用后，就如普通的终端一样。")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"docker仓库"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker仓库","aria-hidden":"true"}},[this._v("#")]),this._v(" Docker仓库")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("可以通过"),e("code",[this._v("docker search")]),this._v("命令来查找官方仓库中的镜像，并利用"),e("code",[this._v("docker pull")]),this._v("命令来将它下载到本地。")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"下载registry"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#下载registry","aria-hidden":"true"}},[this._v("#")]),this._v(" 下载registry")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("docker run -d -p 5000:5000 --restart=always --name registry registry\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"在配置文件中添加私有仓库地址"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#在配置文件中添加私有仓库地址","aria-hidden":"true"}},[this._v("#")]),this._v(" 在配置文件中添加私有仓库地址")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("对于"),e("code",[this._v("systemd")]),this._v("系统，打开之前设置的"),e("code",[this._v("/etc/docker/daemon.json")]),this._v(",添加一条镜像地址。")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v('{\n  "registry-mirrors": [\n    "https://registry.docker-cn.com"\n  ],\n  "insecure-registries": [\n    "127.0.0.0:5000"\n  ]\n}\n')])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"使用流程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用流程","aria-hidden":"true"}},[this._v("#")]),this._v(" 使用流程")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{attrs:{id:"从官方下载镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#从官方下载镜像","aria-hidden":"true"}},[this._v("#")]),this._v(" 从官方下载镜像")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("code",[this._v("docker pull ubuntu")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{attrs:{id:"为私有镜像标记特有的名称"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#为私有镜像标记特有的名称","aria-hidden":"true"}},[this._v("#")]),this._v(" 为私有镜像标记特有的名称")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("code",[this._v("docker image tag ubuntu localhost:5000/myfirstimage")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{attrs:{id:"上传到私有镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#上传到私有镜像","aria-hidden":"true"}},[this._v("#")]),this._v(" 上传到私有镜像")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("code",[this._v("docker push localhost:5000/myfirstimage")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{attrs:{id:"从私有仓库下载刚上传的镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#从私有仓库下载刚上传的镜像","aria-hidden":"true"}},[this._v("#")]),this._v(" 从私有仓库下载刚上传的镜像")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("code",[this._v("docker pull localhost:5000/myfirstimage")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"dockercompose"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dockercompose","aria-hidden":"true"}},[this._v("#")]),this._v(" DockerCompose")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"dockercompose是什么"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dockercompose是什么","aria-hidden":"true"}},[this._v("#")]),this._v(" DockerCompose是什么")])}],!1,null,null,null);e.default=a.exports}}]);